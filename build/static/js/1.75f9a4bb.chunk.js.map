{"version":3,"sources":["../node_modules/async/internal/wrapAsync.js","../node_modules/web3-provider-engine/subproviders/subprovider.js","../node_modules/web3-provider-engine/util/create-payload.js","../node_modules/web3-provider-engine/index.js","../node_modules/async/internal/slice.js","../node_modules/web3-provider-engine/subproviders/hooked-wallet.js","../node_modules/web3-provider-engine/subproviders/subscriptions.js","../node_modules/web3-provider-engine/subproviders/filters.js","../node_modules/async/internal/once.js","../node_modules/async/internal/onlyOnce.js","../node_modules/web3-provider-engine/subproviders/json-rpc-engine-middleware.js","../node_modules/async/eachOf.js","../node_modules/async/internal/breakLoop.js","../node_modules/async/internal/eachOfLimit.js","../node_modules/async/internal/doLimit.js","../node_modules/web3-provider-engine/util/rpc-cache-utils.js","../node_modules/async/map.js","../node_modules/async/internal/doParallel.js","../node_modules/async/eachOfLimit.js","../node_modules/async/internal/iterator.js","../node_modules/async/internal/getIterator.js","../node_modules/async/asyncify.js","../node_modules/async/internal/initialParams.js","../node_modules/async/internal/setImmediate.js","../node_modules/async/internal/map.js","../node_modules/async/eachSeries.js","../node_modules/async/eachLimit.js","../node_modules/async/internal/withoutIndex.js","../node_modules/web3-provider-engine/util/stoplight.js","../node_modules/web3-provider-engine/util/random-id.js","../node_modules/async/waterfall.js","../node_modules/async/parallel.js","../node_modules/async/internal/parallel.js","../node_modules/web3-provider-engine/util/estimate-gas.js"],"names":["Object","defineProperty","exports","value","isAsync","undefined","obj","_asyncify","require","_asyncify2","__esModule","default","supportsSymbol","Symbol","fn","toStringTag","asyncFn","createPayload","SubProvider","module","prototype","setEngine","engine","self","this","on","block","currentBlock","start","stop","handleRequest","payload","next","end","Error","emitPayload","cb","sendAsync","getRandomId","extend","data","id","jsonrpc","params","EventEmitter","inherits","ethUtil","EthBlockTracker","map","eachSeries","Stoplight","Web3ProviderEngine","opts","call","setMaxListeners","directProvider","_handleAsync","bind","blockTrackerProvider","_blockTracker","blockTracker","provider","pollingInterval","setSkipCacheFlag","_ready","_providers","toBufferBlock","jsonBlock","number","toBuffer","hash","parentHash","nonce","mixHash","sha3Uncles","logsBloom","transactionsRoot","stateRoot","receiptsRoot","receiptRoot","miner","difficulty","totalDifficulty","size","extraData","gasLimit","gasUsed","timestamp","transactions","go","blockNumber","_getBlockByNumberWithRetry","err","emit","console","log","bufferBlock","_setCurrentBlock","_running","removeAllListeners","isRunning","addProvider","source","index","splice","push","removeProvider","indexOf","send","await","Array","isArray","retriesRemaining","attemptRequest","_getBlockByNumber","afterRequest","setTimeout","req","method","skipCache","res","result","finished","currentProvider","error","stack","_error","_result","callback","resultObj","message","code","after","unshift","length","e","arrayLike","newLen","Math","max","newArr","idx","waterfall","parallel","sigUtil","Semaphore","Subprovider","estimateGas","hexRegex","HookedWalletSubprovider","nonceLock","getAccounts","processTransaction","processMessage","processPersonalMessage","processTypedMessage","approveTransaction","autoApprove","approveMessage","approvePersonalMessage","approveDecryptMessage","approveEncryptionPublicKey","approveTypedMessage","signTransaction","mustProvideInConstructor","signMessage","signPersonalMessage","decryptMessage","encryptionPublicKey","signTypedMessage","recoverPersonalSignature","publishTransaction","getGasPrice","toLowerCase","string","resemblesAddress","fixed","addHexPrefix","isValidAddress","resemblesData","isValidHex","slice","match","methodName","txParams","msgParams","extraParams","address","_parityRequests","_parityRequestCount","accounts","validateTransaction","processSignTransaction","from","validateMessage","first","warn","warning","validatePersonalMessage","validateDecryptMessage","processDecryptMessage","validateEncryptionPublicKey","processEncryptionPublicKey","signature","sig","second","validateTypedMessage","parityPostTransaction","parityPostSign","requestId","parityCheckRequest","account","didApprove","checkApproval","finalizeAndSubmitTx","finalizeTx","type","count","reqId","toString","txHash","senderHex","validateSender","senderIsValid","senderAddress","take","fillInTxExtras","leave","signedTx","raw","tx","rawTx","tasks","gasPrice","gas","to","cloneTxParams","taskResults","ProviderSubprovider","createSubscriptionManager","SubscriptionsSubprovider","events","middleware","createFilterMiddleware","callFn","apply","arguments","JsonRpcEngineMiddlewareSubprovider","constructorFn","_constructorFn","provEngNext","provEngEnd","handler","coll","iteratee","_isArrayLike2","eachOfArrayLike","eachOfGeneric","_wrapAsync2","_interopRequireDefault","_breakLoop2","_eachOfLimit2","_doLimit2","_noop2","_once2","_onlyOnce2","completed","iteratorCallback","Infinity","limit","nextElem","_iterator2","done","running","looping","iterateeCallback","replenish","elem","key","iterable","stringify","canCache","cacheTypeForPayload","paramsWithoutBlockTag","blockTagParamIndex","cacheIdentifierForPayload","includeBlockRef","blockTagForPayload","_doParallel2","_map2","_eachOf2","_eachOfLimit3","i","len","createArrayIterator","iterator","_getIterator2","item","createES2015Iterator","okeys","_keys2","createObjectIterator","iteratorSymbol","func","_initialParams2","args","_isObject2","then","invokeCallback","_setImmediate2","rethrow","_slice2","pop","_slice","hasNextTick","hasSetImmediate","fallback","wrap","_defer","setImmediate","process","nextTick","defer","eachfn","arr","results","counter","_iteratee","_","v","_eachLimit2","_withoutIndex2","isLocked","once","floor","Number","MAX_SAFE_INTEGER","random","_isArray2","taskIndex","nextTask","task","_parallel2"],"mappings":"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","file":"static/js/1.75f9a4bb.chunk.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.isAsync = undefined;\n\nvar _asyncify = require('../asyncify');\n\nvar _asyncify2 = _interopRequireDefault(_asyncify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar supportsSymbol = typeof Symbol === 'function';\n\nfunction isAsync(fn) {\n    return supportsSymbol && fn[Symbol.toStringTag] === 'AsyncFunction';\n}\n\nfunction wrapAsync(asyncFn) {\n    return isAsync(asyncFn) ? (0, _asyncify2.default)(asyncFn) : asyncFn;\n}\n\nexports.default = wrapAsync;\nexports.isAsync = isAsync;","const createPayload = require('../util/create-payload.js')\n\nmodule.exports = SubProvider\n\n// this is the base class for a subprovider -- mostly helpers\n\n\nfunction SubProvider() {\n\n}\n\nSubProvider.prototype.setEngine = function(engine) {\n  const self = this\n  if (self.engine) return\n  self.engine = engine\n  engine.on('block', function(block) {\n    self.currentBlock = block\n  })\n\n  engine.on('start', function () {\n    self.start()\n  })\n\n  engine.on('stop', function () {\n    self.stop()\n  })\n}\n\nSubProvider.prototype.handleRequest = function(payload, next, end) {\n  throw new Error('Subproviders should override `handleRequest`.')\n}\n\nSubProvider.prototype.emitPayload = function(payload, cb){\n  const self = this\n  self.engine.sendAsync(createPayload(payload), cb)\n}\n\n// dummies for overriding\n\nSubProvider.prototype.stop = function () {}\n\nSubProvider.prototype.start = function () {}\n","const getRandomId = require('./random-id.js')\nconst extend = require('xtend')\n\nmodule.exports = createPayload\n\n\nfunction createPayload(data){\n  return extend({\n    // defaults\n    id: getRandomId(),\n    jsonrpc: '2.0',\n    params: [],\n    // user-specified\n  }, data)\n}\n","const EventEmitter = require('events').EventEmitter\nconst inherits = require('util').inherits\nconst ethUtil = require('ethereumjs-util')\nconst EthBlockTracker = require('eth-block-tracker')\nconst map = require('async/map')\nconst eachSeries = require('async/eachSeries')\nconst Stoplight = require('./util/stoplight.js')\nconst cacheUtils = require('./util/rpc-cache-utils.js')\nconst createPayload = require('./util/create-payload.js')\nconst noop = function(){}\n\nmodule.exports = Web3ProviderEngine\n\n\ninherits(Web3ProviderEngine, EventEmitter)\n\nfunction Web3ProviderEngine(opts) {\n  const self = this\n  EventEmitter.call(self)\n  self.setMaxListeners(30)\n  // parse options\n  opts = opts || {}\n\n  // block polling\n  const directProvider = { sendAsync: self._handleAsync.bind(self) }\n  const blockTrackerProvider = opts.blockTrackerProvider || directProvider\n  self._blockTracker = opts.blockTracker || new EthBlockTracker({\n    provider: blockTrackerProvider,\n    pollingInterval: opts.pollingInterval || 4000,\n    setSkipCacheFlag: true,\n  })\n\n  // set initialization blocker\n  self._ready = new Stoplight()\n\n  // local state\n  self.currentBlock = null\n  self._providers = []\n}\n\n// public\n\nWeb3ProviderEngine.prototype.start = function(cb = noop){\n  const self = this\n\n  // trigger start\n  self._ready.go()\n\n  // on new block, request block body and emit as events\n  self._blockTracker.on('latest', (blockNumber) => {\n    // get block body\n    self._getBlockByNumberWithRetry(blockNumber, (err, block) => {\n      if (err) {\n        this.emit('error', err)\n        return\n      }\n      if (!block) {\n        console.log(block)\n        this.emit('error', new Error(\"Could not find block\"))\n        return\n      }\n      const bufferBlock = toBufferBlock(block)\n      // set current + emit \"block\" event\n      self._setCurrentBlock(bufferBlock)\n      // emit other events\n      self.emit('rawBlock', block)\n      self.emit('latest', block)\n    })\n  })\n\n  // forward other events\n  self._blockTracker.on('sync', self.emit.bind(self, 'sync'))\n  self._blockTracker.on('error', self.emit.bind(self, 'error'))\n\n  // update state\n  self._running = true\n  // signal that we started\n  self.emit('start')\n}\n\nWeb3ProviderEngine.prototype.stop = function(){\n  const self = this\n  // stop block polling by removing event listeners\n  self._blockTracker.removeAllListeners()\n  // update state\n  self._running = false\n  // signal that we stopped\n  self.emit('stop')\n}\n\nWeb3ProviderEngine.prototype.isRunning = function(){\n  const self = this\n  return self._running\n}\n\nWeb3ProviderEngine.prototype.addProvider = function(source, index){\n  const self = this\n  if (typeof index === 'number') {\n    self._providers.splice(index, 0, source)\n  } else {\n    self._providers.push(source)\n  }\n  source.setEngine(this)\n}\n\nWeb3ProviderEngine.prototype.removeProvider = function(source){\n  const self = this\n  const index = self._providers.indexOf(source)\n  if (index < 0) throw new Error('Provider not found.')\n  self._providers.splice(index, 1)\n}\n\nWeb3ProviderEngine.prototype.send = function(payload){\n  throw new Error('Web3ProviderEngine does not support synchronous requests.')\n}\n\nWeb3ProviderEngine.prototype.sendAsync = function(payload, cb){\n  const self = this\n  self._ready.await(function(){\n\n    if (Array.isArray(payload)) {\n      // handle batch\n      map(payload, self._handleAsync.bind(self), cb)\n    } else {\n      // handle single\n      self._handleAsync(payload, cb)\n    }\n\n  })\n}\n\n// private\n\nWeb3ProviderEngine.prototype._getBlockByNumberWithRetry = function(blockNumber, cb) {\n  const self = this\n\n  let retriesRemaining = 5\n\n  attemptRequest()\n  return\n\n  function attemptRequest () {\n    self._getBlockByNumber(blockNumber, afterRequest)\n  }\n\n  function afterRequest (err, block) {\n    // anomalous error occurred\n    if (err) return cb(err)\n    // block not ready yet\n    if (!block) {\n      if (retriesRemaining > 0) {\n        // wait 1s then try again\n        retriesRemaining--\n        setTimeout(function () {\n          attemptRequest()\n        }, 1000)\n        return\n      } else {\n        // give up, return a null block\n        cb(null, null)\n        return\n      }\n    }\n    // otherwise return result\n    cb(null, block)\n    return\n  }\n}\n\n\nWeb3ProviderEngine.prototype._getBlockByNumber = function(blockNumber, cb) {\n  const req = createPayload({ method: 'eth_getBlockByNumber', params: [blockNumber, false], skipCache: true })\n  this._handleAsync(req, (err, res) => {\n    if (err) return cb(err)\n    return cb(null, res.result)\n  })\n}\n\nWeb3ProviderEngine.prototype._handleAsync = function(payload, finished) {\n  var self = this\n  var currentProvider = -1\n  var result = null\n  var error = null\n\n  var stack = []\n\n  next()\n\n  function next(after) {\n    currentProvider += 1\n    stack.unshift(after)\n\n    // Bubbled down as far as we could go, and the request wasn't\n    // handled. Return an error.\n    if (currentProvider >= self._providers.length) {\n      end(new Error('Request for method \"' + payload.method + '\" not handled by any subprovider. Please check your subprovider configuration to ensure this method is handled.'))\n    } else {\n      try {\n        var provider = self._providers[currentProvider]\n        provider.handleRequest(payload, next, end)\n      } catch (e) {\n        end(e)\n      }\n    }\n  }\n\n  function end(_error, _result) {\n    error = _error\n    result = _result\n\n    eachSeries(stack, function(fn, callback) {\n\n      if (fn) {\n        fn(error, result, callback)\n      } else {\n        callback()\n      }\n    }, function() {\n\n      var resultObj = {\n        id: payload.id,\n        jsonrpc: payload.jsonrpc,\n        result: result\n      }\n\n      if (error != null) {\n        resultObj.error = {\n          message: error.stack || error.message || error,\n          code: -32000\n        }\n        // respond with both error formats\n        finished(error, resultObj)\n      } else {\n        finished(null, resultObj)\n      }\n    })\n  }\n}\n\n//\n// from remote-data\n//\n\nWeb3ProviderEngine.prototype._setCurrentBlock = function(block){\n  const self = this\n  self.currentBlock = block\n  self.emit('block', block)\n}\n\n// util\n\nfunction toBufferBlock (jsonBlock) {\n  return {\n    number:           ethUtil.toBuffer(jsonBlock.number),\n    hash:             ethUtil.toBuffer(jsonBlock.hash),\n    parentHash:       ethUtil.toBuffer(jsonBlock.parentHash),\n    nonce:            ethUtil.toBuffer(jsonBlock.nonce),\n    mixHash:          ethUtil.toBuffer(jsonBlock.mixHash),\n    sha3Uncles:       ethUtil.toBuffer(jsonBlock.sha3Uncles),\n    logsBloom:        ethUtil.toBuffer(jsonBlock.logsBloom),\n    transactionsRoot: ethUtil.toBuffer(jsonBlock.transactionsRoot),\n    stateRoot:        ethUtil.toBuffer(jsonBlock.stateRoot),\n    receiptsRoot:     ethUtil.toBuffer(jsonBlock.receiptRoot || jsonBlock.receiptsRoot),\n    miner:            ethUtil.toBuffer(jsonBlock.miner),\n    difficulty:       ethUtil.toBuffer(jsonBlock.difficulty),\n    totalDifficulty:  ethUtil.toBuffer(jsonBlock.totalDifficulty),\n    size:             ethUtil.toBuffer(jsonBlock.size),\n    extraData:        ethUtil.toBuffer(jsonBlock.extraData),\n    gasLimit:         ethUtil.toBuffer(jsonBlock.gasLimit),\n    gasUsed:          ethUtil.toBuffer(jsonBlock.gasUsed),\n    timestamp:        ethUtil.toBuffer(jsonBlock.timestamp),\n    transactions:     jsonBlock.transactions,\n  }\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = slice;\nfunction slice(arrayLike, start) {\n    start = start | 0;\n    var newLen = Math.max(arrayLike.length - start, 0);\n    var newArr = Array(newLen);\n    for (var idx = 0; idx < newLen; idx++) {\n        newArr[idx] = arrayLike[start + idx];\n    }\n    return newArr;\n}\nmodule.exports = exports[\"default\"];","/*\n * Emulate 'eth_accounts' / 'eth_sendTransaction' using 'eth_sendRawTransaction'\n *\n * The two callbacks a user needs to implement are:\n * - getAccounts() -- array of addresses supported\n * - signTransaction(tx) -- sign a raw transaction object\n */\n\nconst waterfall = require('async/waterfall')\nconst parallel = require('async/parallel')\nconst inherits = require('util').inherits\nconst ethUtil = require('ethereumjs-util')\nconst sigUtil = require('eth-sig-util')\nconst extend = require('xtend')\nconst Semaphore = require('semaphore')\nconst Subprovider = require('./subprovider.js')\nconst estimateGas = require('../util/estimate-gas.js')\nconst hexRegex = /^[0-9A-Fa-f]+$/g\n\nmodule.exports = HookedWalletSubprovider\n\n// handles the following RPC methods:\n//   eth_coinbase\n//   eth_accounts\n//   eth_sendTransaction\n//   eth_sign\n//   eth_signTypedData\n//   eth_signTypedData_v3\n//   eth_signTypedData_v4\n//   personal_sign\n//   eth_decryptMessage\n//   encryption_public_key\n//   personal_ecRecover\n//   parity_postTransaction\n//   parity_checkRequest\n//   parity_defaultAccount\n\n//\n// Tx Signature Flow\n//\n// handleRequest: eth_sendTransaction\n//   validateTransaction (basic validity check)\n//     validateSender (checks that sender is in accounts)\n//   processTransaction (sign tx and submit to network)\n//     approveTransaction (UI approval hook)\n//     checkApproval\n//     finalizeAndSubmitTx (tx signing)\n//       nonceLock.take (bottle neck to ensure atomic nonce)\n//         fillInTxExtras (set fallback gasPrice, nonce, etc)\n//         signTransaction (perform the signature)\n//         publishTransaction (publish signed tx to network)\n//\n\n\ninherits(HookedWalletSubprovider, Subprovider)\n\nfunction HookedWalletSubprovider(opts){\n  const self = this\n  // control flow\n  self.nonceLock = Semaphore(1)\n\n  // data lookup\n  if (opts.getAccounts) self.getAccounts = opts.getAccounts\n  // high level override\n  if (opts.processTransaction) self.processTransaction = opts.processTransaction\n  if (opts.processMessage) self.processMessage = opts.processMessage\n  if (opts.processPersonalMessage) self.processPersonalMessage = opts.processPersonalMessage\n  if (opts.processTypedMessage) self.processTypedMessage = opts.processTypedMessage\n  // approval hooks\n  self.approveTransaction = opts.approveTransaction || self.autoApprove\n  self.approveMessage = opts.approveMessage || self.autoApprove\n  self.approvePersonalMessage = opts.approvePersonalMessage || self.autoApprove\n  self.approveDecryptMessage = opts.approveDecryptMessage || self.autoApprove\n  self.approveEncryptionPublicKey = opts.approveEncryptionPublicKey || self.autoApprove\n  self.approveTypedMessage = opts.approveTypedMessage || self.autoApprove\n  // actually perform the signature\n  if (opts.signTransaction) self.signTransaction = opts.signTransaction  || mustProvideInConstructor('signTransaction')\n  if (opts.signMessage) self.signMessage = opts.signMessage  || mustProvideInConstructor('signMessage')\n  if (opts.signPersonalMessage) self.signPersonalMessage = opts.signPersonalMessage  || mustProvideInConstructor('signPersonalMessage')\n  if (opts.decryptMessage) self.decryptMessage = opts.decryptMessage  || mustProvideInConstructor('decryptMessage')\n  if (opts.encryptionPublicKey) self.encryptionPublicKey = opts.encryptionPublicKey  || mustProvideInConstructor('encryptionPublicKey')\n  if (opts.signTypedMessage) self.signTypedMessage = opts.signTypedMessage  || mustProvideInConstructor('signTypedMessage')\n  if (opts.recoverPersonalSignature) self.recoverPersonalSignature = opts.recoverPersonalSignature\n  // publish to network\n  if (opts.publishTransaction) self.publishTransaction = opts.publishTransaction\n  // gas options\n  self.estimateGas = opts.estimateGas || self.estimateGas\n  self.getGasPrice = opts.getGasPrice || self.getGasPrice\n}\n\nHookedWalletSubprovider.prototype.handleRequest = function(payload, next, end){\n  const self = this\n  self._parityRequests = {}\n  self._parityRequestCount = 0\n\n  // switch statement is not block scoped\n  // sp we cant repeat var declarations\n  let txParams, msgParams, extraParams\n  let message, address\n\n  switch(payload.method) {\n\n    case 'eth_coinbase':\n      // process normally\n      self.getAccounts(function(err, accounts){\n        if (err) return end(err)\n        let result = accounts[0] || null\n        end(null, result)\n      })\n      return\n\n    case 'eth_accounts':\n      // process normally\n      self.getAccounts(function(err, accounts){\n        if (err) return end(err)\n        end(null, accounts)\n      })\n      return\n\n    case 'eth_sendTransaction':\n      txParams = payload.params[0]\n      waterfall([\n        (cb) => self.validateTransaction(txParams, cb),\n        (cb) => self.processTransaction(txParams, cb),\n      ], end)\n      return\n\n    case 'eth_signTransaction':\n      txParams = payload.params[0]\n      waterfall([\n        (cb) => self.validateTransaction(txParams, cb),\n        (cb) => self.processSignTransaction(txParams, cb),\n      ], end)\n      return\n\n    case 'eth_sign':\n      // process normally\n      address = payload.params[0]\n      message = payload.params[1]\n      // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n      // good place for metadata\n      extraParams = payload.params[2] || {}\n      msgParams = extend(extraParams, {\n        from: address,\n        data: message,\n      })\n      waterfall([\n        (cb) => self.validateMessage(msgParams, cb),\n        (cb) => self.processMessage(msgParams, cb),\n      ], end)\n      return\n\n    case 'personal_sign':\n      return (function(){\n        // process normally\n        const first = payload.params[0]\n        const second = payload.params[1]\n\n        // We initially incorrectly ordered these parameters.\n        // To gracefully respect users who adopted this API early,\n        // we are currently gracefully recovering from the wrong param order\n        // when it is clearly identifiable.\n        //\n        // That means when the first param is definitely an address,\n        // and the second param is definitely not, but is hex.\n        if (resemblesData(second) && resemblesAddress(first)) {\n          let warning = `The eth_personalSign method requires params ordered `\n          warning += `[message, address]. This was previously handled incorrectly, `\n          warning += `and has been corrected automatically. `\n          warning += `Please switch this param order for smooth behavior in the future.`\n          console.warn(warning)\n\n          address = payload.params[0]\n          message = payload.params[1]\n        } else {\n          message = payload.params[0]\n          address = payload.params[1]\n        }\n\n        // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n        // good place for metadata\n        extraParams = payload.params[2] || {}\n        msgParams = extend(extraParams, {\n          from: address,\n          data: message,\n        })\n        waterfall([\n          (cb) => self.validatePersonalMessage(msgParams, cb),\n          (cb) => self.processPersonalMessage(msgParams, cb),\n        ], end)\n      })()\n\n    case 'eth_decryptMessage':\n      return (function(){\n        // process normally\n        const first = payload.params[0]\n        const second = payload.params[1]\n\n        // We initially incorrectly ordered these parameters.\n        // To gracefully respect users who adopted this API early,\n        // we are currently gracefully recovering from the wrong param order\n        // when it is clearly identifiable.\n        //\n        // That means when the first param is definitely an address,\n        // and the second param is definitely not, but is hex.\n        if (resemblesData(second) && resemblesAddress(first)) {\n          let warning = `The eth_decryptMessage method requires params ordered `\n          warning += `[message, address]. This was previously handled incorrectly, `\n          warning += `and has been corrected automatically. `\n          warning += `Please switch this param order for smooth behavior in the future.`\n          console.warn(warning)\n\n          address = payload.params[0]\n          message = payload.params[1]\n        } else {\n          message = payload.params[0]\n          address = payload.params[1]\n        }\n\n        // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n        // good place for metadata\n        extraParams = payload.params[2] || {}\n        msgParams = extend(extraParams, {\n          from: address,\n          data: message,\n        })\n        waterfall([\n          (cb) => self.validateDecryptMessage(msgParams, cb),\n          (cb) => self.processDecryptMessage(msgParams, cb),\n        ], end)\n      })()\n      \n    case 'encryption_public_key':\n      return (function(){\n        const address = payload.params[0]\n        \n        waterfall([\n          (cb) => self.validateEncryptionPublicKey(address, cb),\n          (cb) => self.processEncryptionPublicKey(address, cb),\n        ], end)\n      })()\n      \n    case 'personal_ecRecover':\n      return (function(){    \n        message = payload.params[0]\n        let signature = payload.params[1]\n        // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n        // good place for metadata\n        extraParams = payload.params[2] || {}\n        msgParams = extend(extraParams, {\n          sig: signature,\n          data: message,\n        })\n        self.recoverPersonalSignature(msgParams, end)\n      })()\n\n    case 'eth_signTypedData':\n    case 'eth_signTypedData_v3':\n    case 'eth_signTypedData_v4':\n      return (function(){ \n        // process normally\n      \n        const first = payload.params[0]\n        const second = payload.params[1]\n\n        if (resemblesAddress(first)) {\n          address = first\n          message = second\n        } else {\n          message = first\n          address = second\n        }\n\n        extraParams = payload.params[2] || {}\n        msgParams = extend(extraParams, {\n          from: address,\n          data: message,\n        })\n        waterfall([\n          (cb) => self.validateTypedMessage(msgParams, cb),\n          (cb) => self.processTypedMessage(msgParams, cb),\n        ], end)\n      })()\n\n    case 'parity_postTransaction':\n      txParams = payload.params[0]\n      self.parityPostTransaction(txParams, end)\n      return\n\n    case 'parity_postSign':\n      address = payload.params[0]\n      message = payload.params[1]\n      self.parityPostSign(address, message, end)\n      return\n\n    case 'parity_checkRequest':\n      return (function(){\n        const requestId = payload.params[0]\n        self.parityCheckRequest(requestId, end)\n      })()\n\n    case 'parity_defaultAccount':\n      self.getAccounts(function(err, accounts){\n        if (err) return end(err)\n        const account = accounts[0] || null\n        end(null, account)\n      })\n      return\n\n    default:\n      next()\n      return\n\n  }\n}\n\n//\n// data lookup\n//\n\nHookedWalletSubprovider.prototype.getAccounts = function(cb) {\n  cb(null, [])\n}\n\n\n//\n// \"process\" high level flow\n//\n\nHookedWalletSubprovider.prototype.processTransaction = function(txParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approveTransaction(txParams, cb),\n    (didApprove, cb) => self.checkApproval('transaction', didApprove, cb),\n    (cb) => self.finalizeAndSubmitTx(txParams, cb),\n  ], cb)\n}\n\n\nHookedWalletSubprovider.prototype.processSignTransaction = function(txParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approveTransaction(txParams, cb),\n    (didApprove, cb) => self.checkApproval('transaction', didApprove, cb),\n    (cb) => self.finalizeTx(txParams, cb),\n  ], cb)\n}\n\nHookedWalletSubprovider.prototype.processMessage = function(msgParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approveMessage(msgParams, cb),\n    (didApprove, cb) => self.checkApproval('message', didApprove, cb),\n    (cb) => self.signMessage(msgParams, cb),\n  ], cb)\n}\n\nHookedWalletSubprovider.prototype.processPersonalMessage = function(msgParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approvePersonalMessage(msgParams, cb),\n    (didApprove, cb) => self.checkApproval('message', didApprove, cb),\n    (cb) => self.signPersonalMessage(msgParams, cb),\n  ], cb)\n}\n\nHookedWalletSubprovider.prototype.processDecryptMessage = function(msgParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approveDecryptMessage(msgParams, cb),\n    (didApprove, cb) => self.checkApproval('decryptMessage', didApprove, cb),\n    (cb) => self.decryptMessage(msgParams, cb),\n  ], cb)\n}\n\nHookedWalletSubprovider.prototype.processEncryptionPublicKey = function(msgParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approveEncryptionPublicKey(msgParams, cb),\n    (didApprove, cb) => self.checkApproval('encryptionPublicKey', didApprove, cb),\n    (cb) => self.encryptionPublicKey(msgParams, cb),\n  ], cb)\n}\n\nHookedWalletSubprovider.prototype.processTypedMessage = function(msgParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approveTypedMessage(msgParams, cb),\n    (didApprove, cb) => self.checkApproval('message', didApprove, cb),\n    (cb) => self.signTypedMessage(msgParams, cb),\n  ], cb)\n}\n\n//\n// approval\n//\n\nHookedWalletSubprovider.prototype.autoApprove = function(txParams, cb) {\n  cb(null, true)\n}\n\nHookedWalletSubprovider.prototype.checkApproval = function(type, didApprove, cb) {\n  cb( didApprove ? null : new Error('User denied '+type+' signature.') )\n}\n\n//\n// parity\n//\n\nHookedWalletSubprovider.prototype.parityPostTransaction = function(txParams, cb) {\n  const self = this\n\n  // get next id\n  const count = self._parityRequestCount\n  const reqId = `0x${count.toString(16)}`\n  self._parityRequestCount++\n\n  self.emitPayload({\n    method: 'eth_sendTransaction',\n    params: [txParams],\n  }, function(error, res){\n    if (error) {\n      self._parityRequests[reqId] = { error }\n      return\n    }\n    const txHash = res.result\n    self._parityRequests[reqId] = txHash\n  })\n\n  cb(null, reqId)\n}\n\n\nHookedWalletSubprovider.prototype.parityPostSign = function(address, message, cb) {\n  const self = this\n\n  // get next id\n  const count = self._parityRequestCount\n  const reqId = `0x${count.toString(16)}`\n  self._parityRequestCount++\n\n  self.emitPayload({\n    method: 'eth_sign',\n    params: [address, message],\n  }, function(error, res){\n    if (error) {\n      self._parityRequests[reqId] = { error }\n      return\n    }\n    const result = res.result\n    self._parityRequests[reqId] = result\n  })\n\n  cb(null, reqId)\n}\n\nHookedWalletSubprovider.prototype.parityCheckRequest = function(reqId, cb) {\n  const self = this\n  const result = self._parityRequests[reqId] || null\n  // tx not handled yet\n  if (!result) return cb(null, null)\n  // tx was rejected (or other error)\n  if (result.error) return cb(result.error)\n  // tx sent\n  cb(null, result)\n}\n\n//\n// signature and recovery\n//\n\nHookedWalletSubprovider.prototype.recoverPersonalSignature = function(msgParams, cb) {\n  let senderHex\n  try {\n    senderHex = sigUtil.recoverPersonalSignature(msgParams)\n  } catch (err) {\n    return cb(err)\n  }\n  cb(null, senderHex)\n}\n\n//\n// validation\n//\n\nHookedWalletSubprovider.prototype.validateTransaction = function(txParams, cb){\n  const self = this\n  // shortcut: undefined sender is invalid\n  if (txParams.from === undefined) return cb(new Error(`Undefined address - from address required to sign transaction.`))\n  self.validateSender(txParams.from, function(err, senderIsValid){\n    if (err) return cb(err)\n    if (!senderIsValid) return cb(new Error(`Unknown address - unable to sign transaction for this address: \"${txParams.from}\"`))\n    cb()\n  })\n}\n\nHookedWalletSubprovider.prototype.validateMessage = function(msgParams, cb){\n  const self = this\n  if (msgParams.from === undefined) return cb(new Error(`Undefined address - from address required to sign message.`))\n  self.validateSender(msgParams.from, function(err, senderIsValid){\n    if (err) return cb(err)\n    if (!senderIsValid) return cb(new Error(`Unknown address - unable to sign message for this address: \"${msgParams.from}\"`))\n    cb()\n  })\n}\n\nHookedWalletSubprovider.prototype.validatePersonalMessage = function(msgParams, cb){\n  const self = this\n  if (msgParams.from === undefined) return cb(new Error(`Undefined address - from address required to sign personal message.`))\n  if (msgParams.data === undefined) return cb(new Error(`Undefined message - message required to sign personal message.`))\n  if (!isValidHex(msgParams.data)) return cb(new Error(`HookedWalletSubprovider - validateMessage - message was not encoded as hex.`))\n  self.validateSender(msgParams.from, function(err, senderIsValid){\n    if (err) return cb(err)\n    if (!senderIsValid) return cb(new Error(`Unknown address - unable to sign message for this address: \"${msgParams.from}\"`))\n    cb()\n  })\n}\n\nHookedWalletSubprovider.prototype.validateDecryptMessage = function(msgParams, cb){\n  const self = this\n  if (msgParams.from === undefined) return cb(new Error(`Undefined address - from address required to decrypt message.`))\n  if (msgParams.data === undefined) return cb(new Error(`Undefined message - message required to decrypt message.`))\n  if (!isValidHex(msgParams.data)) return cb(new Error(`HookedWalletSubprovider - validateDecryptMessage - message was not encoded as hex.`))\n  self.validateSender(msgParams.from, function(err, senderIsValid){\n    if (err) return cb(err)\n    if (!senderIsValid) return cb(new Error(`Unknown address - unable to decrypt message for this address: \"${msgParams.from}\"`))\n    cb()\n  })\n}\n\nHookedWalletSubprovider.prototype.validateEncryptionPublicKey = function(address, cb){\n  const self = this\n\n  self.validateSender(address, function(err, senderIsValid){\n    if (err) return cb(err)\n    if (!senderIsValid) return cb(new Error(`Unknown address - unable to obtain encryption public key for this address: \"${address}\"`))\n    cb()\n  })\n}\n\nHookedWalletSubprovider.prototype.validateTypedMessage = function(msgParams, cb){\n  if (msgParams.from === undefined) return cb(new Error(`Undefined address - from address required to sign typed data.`))\n  if (msgParams.data === undefined) return cb(new Error(`Undefined data - message required to sign typed data.`))\n  this.validateSender(msgParams.from, function(err, senderIsValid){\n    if (err) return cb(err)\n    if (!senderIsValid) return cb(new Error(`Unknown address - unable to sign message for this address: \"${msgParams.from}\"`))\n    cb()\n  })\n}\n\nHookedWalletSubprovider.prototype.validateSender = function(senderAddress, cb){\n  const self = this\n  // shortcut: undefined sender is invalid\n  if (!senderAddress) return cb(null, false)\n  self.getAccounts(function(err, accounts){\n    if (err) return cb(err)\n    const senderIsValid = (accounts.map(toLowerCase).indexOf(senderAddress.toLowerCase()) !== -1)\n    cb(null, senderIsValid)\n  })\n}\n\n//\n// tx helpers\n//\n\nHookedWalletSubprovider.prototype.finalizeAndSubmitTx = function(txParams, cb) {\n  const self = this\n  // can only allow one tx to pass through this flow at a time\n  // so we can atomically consume a nonce\n  self.nonceLock.take(function(){\n    waterfall([\n      self.fillInTxExtras.bind(self, txParams),\n      self.signTransaction.bind(self),\n      self.publishTransaction.bind(self),\n    ], function(err, txHash){\n      self.nonceLock.leave()\n      if (err) return cb(err)\n      cb(null, txHash)\n    })\n  })\n}\n\nHookedWalletSubprovider.prototype.finalizeTx = function(txParams, cb) {\n  const self = this\n  // can only allow one tx to pass through this flow at a time\n  // so we can atomically consume a nonce\n  self.nonceLock.take(function(){\n    waterfall([\n      self.fillInTxExtras.bind(self, txParams),\n      self.signTransaction.bind(self),\n    ], function(err, signedTx){\n      self.nonceLock.leave()\n      if (err) return cb(err)\n      cb(null, {raw: signedTx, tx: txParams})\n    })\n  })\n}\n\nHookedWalletSubprovider.prototype.publishTransaction = function(rawTx, cb) {\n  const self = this\n  self.emitPayload({\n    method: 'eth_sendRawTransaction',\n    params: [rawTx],\n  }, function(err, res){\n    if (err) return cb(err)\n    cb(null, res.result)\n  })\n}\n\nHookedWalletSubprovider.prototype.estimateGas = function(txParams, cb) {\n  const self = this\n  estimateGas(self.engine, txParams, cb)\n}\n\nHookedWalletSubprovider.prototype.getGasPrice = function(cb) {\n  const self = this\n  self.emitPayload({ method: 'eth_gasPrice', params: [] }, function (err, res) {\n    if (err) return cb(err)\n    cb(null, res.result)\n  })\n}\n\nHookedWalletSubprovider.prototype.fillInTxExtras = function(txParams, cb){\n  const self = this\n  const address = txParams.from\n  // console.log('fillInTxExtras - address:', address)\n\n  const tasks = {}\n\n  if (txParams.gasPrice === undefined) {\n    // console.log(\"need to get gasprice\")\n    tasks.gasPrice = self.getGasPrice.bind(self)\n  }\n\n  if (txParams.nonce === undefined) {\n    // console.log(\"need to get nonce\")\n    tasks.nonce = self.emitPayload.bind(self, { method: 'eth_getTransactionCount', params: [address, 'pending'] })\n  }\n\n  if (txParams.gas === undefined) {\n    // console.log(\"need to get gas\")\n    tasks.gas = self.estimateGas.bind(self, cloneTxParams(txParams))\n  }\n\n  parallel(tasks, function(err, taskResults) {\n    if (err) return cb(err)\n\n    const result = {}\n    if (taskResults.gasPrice) result.gasPrice = taskResults.gasPrice\n    if (taskResults.nonce) result.nonce = taskResults.nonce.result\n    if (taskResults.gas) result.gas = taskResults.gas\n\n    cb(null, extend(txParams, result))\n  })\n}\n\n// util\n\n// we use this to clean any custom params from the txParams\nfunction cloneTxParams(txParams){\n  return {\n    from: txParams.from,\n    to: txParams.to,\n    value: txParams.value,\n    data: txParams.data,\n    gas: txParams.gas,\n    gasPrice: txParams.gasPrice,\n    nonce: txParams.nonce,\n  }\n}\n\nfunction toLowerCase(string){\n  return string.toLowerCase()\n}\n\nfunction resemblesAddress (string) {\n  const fixed = ethUtil.addHexPrefix(string)\n  const isValid = ethUtil.isValidAddress(fixed)\n  return isValid\n}\n\n// Returns true if resembles hex data\n// but definitely not a valid address.\nfunction resemblesData (string) {\n  const fixed = ethUtil.addHexPrefix(string)\n  const isValidAddress = ethUtil.isValidAddress(fixed)\n  return !isValidAddress && isValidHex(string)\n}\n\nfunction isValidHex(data) {\n  const isString = typeof data === 'string'\n  if (!isString) return false\n  const isHexPrefixed = data.slice(0,2) === '0x'\n  if (!isHexPrefixed) return false\n  const nonPrefixed = data.slice(2)\n  const isValid = nonPrefixed.match(hexRegex)\n  return isValid\n}\n\nfunction mustProvideInConstructor(methodName) {\n  return function(params, cb) {\n    cb(new Error('ProviderEngine - HookedWalletSubprovider - Must provide \"' + methodName + '\" fn in constructor options'))\n  }\n}\n","const ProviderSubprovider = require('./json-rpc-engine-middleware')\nconst createSubscriptionManager = require('eth-json-rpc-filters/subscriptionManager')\n\nclass SubscriptionsSubprovider extends ProviderSubprovider {\n  constructor() {\n    super(({ blockTracker, provider, engine }) => {\n      const { events, middleware } = createSubscriptionManager({ blockTracker, provider })\n      // forward subscription events on the engine\n      events.on('notification', (data) => engine.emit('data', null, data))\n      // return the subscription install/remove middleware\n      return middleware\n    })\n  }\n}\n\nmodule.exports = SubscriptionsSubprovider\n","const ProviderSubprovider = require('./json-rpc-engine-middleware')\nconst createFilterMiddleware = require('eth-json-rpc-filters')\n\nclass SubscriptionsSubprovider extends ProviderSubprovider {\n  constructor() {\n    super(({ blockTracker, provider, engine }) => {\n      return createFilterMiddleware({ blockTracker, provider })\n    })\n  }\n}\n\nmodule.exports = SubscriptionsSubprovider\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = once;\nfunction once(fn) {\n    return function () {\n        if (fn === null) return;\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, arguments);\n    };\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = onlyOnce;\nfunction onlyOnce(fn) {\n    return function () {\n        if (fn === null) throw new Error(\"Callback was already called.\");\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, arguments);\n    };\n}\nmodule.exports = exports[\"default\"];","const Subprovider = require('./subprovider.js')\n\n// wraps a json-rpc-engine middleware in a subprovider interface\n\nclass JsonRpcEngineMiddlewareSubprovider extends Subprovider {\n\n  // take a constructorFn to call once we have a reference to the engine\n  constructor (constructorFn) {\n    super()\n    if (!constructorFn) throw new Error('JsonRpcEngineMiddlewareSubprovider - no constructorFn specified')\n    this._constructorFn = constructorFn\n  }\n\n  // this is called once the subprovider has been added to the provider engine\n  setEngine (engine) {\n    if (this.middleware) throw new Error('JsonRpcEngineMiddlewareSubprovider - subprovider added to engine twice')\n    const blockTracker = engine._blockTracker\n    const middleware = this._constructorFn({ engine, provider: engine, blockTracker })\n    if (!middleware) throw new Error('JsonRpcEngineMiddlewareSubprovider - _constructorFn did not return middleware')\n    if (typeof middleware !== 'function') throw new Error('JsonRpcEngineMiddlewareSubprovider - specified middleware is not a function')\n    this.middleware = middleware\n  }\n\n  handleRequest (req, provEngNext, provEngEnd) {\n    const res = { id: req.id }\n    this.middleware(req, res, middlewareNext, middlewareEnd)\n\n    function middlewareNext (handler) {\n      provEngNext((err, result, cb) => {\n        // update response object with result or error\n        if (err) {\n          delete res.result\n          res.error = { message: err.message || err }\n        } else {\n          res.result = result\n        }\n        // call middleware's next handler (even if error)\n        if (handler) {\n          handler(cb)\n        } else {\n          cb()\n        }\n      })\n    }\n\n    function middlewareEnd (err) {\n      if (err) return provEngEnd(err)\n      provEngEnd(null, res.result)\n    }\n  }\n\n}\n\nmodule.exports = JsonRpcEngineMiddlewareSubprovider\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (coll, iteratee, callback) {\n    var eachOfImplementation = (0, _isArrayLike2.default)(coll) ? eachOfArrayLike : eachOfGeneric;\n    eachOfImplementation(coll, (0, _wrapAsync2.default)(iteratee), callback);\n};\n\nvar _isArrayLike = require('lodash/isArrayLike');\n\nvar _isArrayLike2 = _interopRequireDefault(_isArrayLike);\n\nvar _breakLoop = require('./internal/breakLoop');\n\nvar _breakLoop2 = _interopRequireDefault(_breakLoop);\n\nvar _eachOfLimit = require('./eachOfLimit');\n\nvar _eachOfLimit2 = _interopRequireDefault(_eachOfLimit);\n\nvar _doLimit = require('./internal/doLimit');\n\nvar _doLimit2 = _interopRequireDefault(_doLimit);\n\nvar _noop = require('lodash/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _once = require('./internal/once');\n\nvar _once2 = _interopRequireDefault(_once);\n\nvar _onlyOnce = require('./internal/onlyOnce');\n\nvar _onlyOnce2 = _interopRequireDefault(_onlyOnce);\n\nvar _wrapAsync = require('./internal/wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// eachOf implementation optimized for array-likes\nfunction eachOfArrayLike(coll, iteratee, callback) {\n    callback = (0, _once2.default)(callback || _noop2.default);\n    var index = 0,\n        completed = 0,\n        length = coll.length;\n    if (length === 0) {\n        callback(null);\n    }\n\n    function iteratorCallback(err, value) {\n        if (err) {\n            callback(err);\n        } else if (++completed === length || value === _breakLoop2.default) {\n            callback(null);\n        }\n    }\n\n    for (; index < length; index++) {\n        iteratee(coll[index], index, (0, _onlyOnce2.default)(iteratorCallback));\n    }\n}\n\n// a generic version of eachOf which can handle array, object, and iterator cases.\nvar eachOfGeneric = (0, _doLimit2.default)(_eachOfLimit2.default, Infinity);\n\n/**\n * Like [`each`]{@link module:Collections.each}, except that it passes the key (or index) as the second argument\n * to the iteratee.\n *\n * @name eachOf\n * @static\n * @memberOf module:Collections\n * @method\n * @alias forEachOf\n * @category Collection\n * @see [async.each]{@link module:Collections.each}\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each\n * item in `coll`.\n * The `key` is the item's key, or index in the case of an array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @example\n *\n * var obj = {dev: \"/dev.json\", test: \"/test.json\", prod: \"/prod.json\"};\n * var configs = {};\n *\n * async.forEachOf(obj, function (value, key, callback) {\n *     fs.readFile(__dirname + value, \"utf8\", function (err, data) {\n *         if (err) return callback(err);\n *         try {\n *             configs[key] = JSON.parse(data);\n *         } catch (e) {\n *             return callback(e);\n *         }\n *         callback();\n *     });\n * }, function (err) {\n *     if (err) console.error(err.message);\n *     // configs is now a map of JSON data\n *     doSomethingWith(configs);\n * });\n */\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// A temporary value used to identify if the loop should be broken.\n// See #1064, #1293\nexports.default = {};\nmodule.exports = exports[\"default\"];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _eachOfLimit;\n\nvar _noop = require('lodash/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _once = require('./once');\n\nvar _once2 = _interopRequireDefault(_once);\n\nvar _iterator = require('./iterator');\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _onlyOnce = require('./onlyOnce');\n\nvar _onlyOnce2 = _interopRequireDefault(_onlyOnce);\n\nvar _breakLoop = require('./breakLoop');\n\nvar _breakLoop2 = _interopRequireDefault(_breakLoop);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _eachOfLimit(limit) {\n    return function (obj, iteratee, callback) {\n        callback = (0, _once2.default)(callback || _noop2.default);\n        if (limit <= 0 || !obj) {\n            return callback(null);\n        }\n        var nextElem = (0, _iterator2.default)(obj);\n        var done = false;\n        var running = 0;\n        var looping = false;\n\n        function iterateeCallback(err, value) {\n            running -= 1;\n            if (err) {\n                done = true;\n                callback(err);\n            } else if (value === _breakLoop2.default || done && running <= 0) {\n                done = true;\n                return callback(null);\n            } else if (!looping) {\n                replenish();\n            }\n        }\n\n        function replenish() {\n            looping = true;\n            while (running < limit && !done) {\n                var elem = nextElem();\n                if (elem === null) {\n                    done = true;\n                    if (running <= 0) {\n                        callback(null);\n                    }\n                    return;\n                }\n                running += 1;\n                iteratee(elem.value, elem.key, (0, _onlyOnce2.default)(iterateeCallback));\n            }\n            looping = false;\n        }\n\n        replenish();\n    };\n}\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = doLimit;\nfunction doLimit(fn, limit) {\n    return function (iterable, iteratee, callback) {\n        return fn(iterable, limit, iteratee, callback);\n    };\n}\nmodule.exports = exports[\"default\"];","const stringify = require('json-stable-stringify')\n\nmodule.exports = {\n  cacheIdentifierForPayload: cacheIdentifierForPayload,\n  canCache: canCache,\n  blockTagForPayload: blockTagForPayload,\n  paramsWithoutBlockTag: paramsWithoutBlockTag,\n  blockTagParamIndex: blockTagParamIndex,\n  cacheTypeForPayload: cacheTypeForPayload,\n}\n\nfunction cacheIdentifierForPayload(payload, opts = {}){\n  if (!canCache(payload)) return null\n  const { includeBlockRef } = opts\n  const params = includeBlockRef ? payload.params : paramsWithoutBlockTag(payload)\n  return payload.method + ':' + stringify(params)\n}\n\nfunction canCache(payload){\n  return cacheTypeForPayload(payload) !== 'never'\n}\n\nfunction blockTagForPayload(payload){\n  var index = blockTagParamIndex(payload);\n\n  // Block tag param not passed.\n  if (index >= payload.params.length) {\n    return null;\n  }\n\n  return payload.params[index];\n}\n\nfunction paramsWithoutBlockTag(payload){\n  var index = blockTagParamIndex(payload);\n\n  // Block tag param not passed.\n  if (index >= payload.params.length) {\n    return payload.params;\n  }\n\n  // eth_getBlockByNumber has the block tag first, then the optional includeTx? param\n  if (payload.method === 'eth_getBlockByNumber') {\n    return payload.params.slice(1);\n  }\n\n  return payload.params.slice(0,index);\n}\n\nfunction blockTagParamIndex(payload){\n  switch(payload.method) {\n    // blockTag is third param\n    case 'eth_getStorageAt':\n      return 2\n    // blockTag is second param\n    case 'eth_getBalance':\n    case 'eth_getCode':\n    case 'eth_getTransactionCount':\n    case 'eth_call':\n    case 'eth_estimateGas':\n      return 1\n    // blockTag is first param\n    case 'eth_getBlockByNumber':\n      return 0\n    // there is no blockTag\n    default:\n      return undefined\n  }\n}\n\nfunction cacheTypeForPayload(payload) {\n  switch (payload.method) {\n    // cache permanently\n    case 'web3_clientVersion':\n    case 'web3_sha3':\n    case 'eth_protocolVersion':\n    case 'eth_getBlockTransactionCountByHash':\n    case 'eth_getUncleCountByBlockHash':\n    case 'eth_getCode':\n    case 'eth_getBlockByHash':\n    case 'eth_getTransactionByHash':\n    case 'eth_getTransactionByBlockHashAndIndex':\n    case 'eth_getTransactionReceipt':\n    case 'eth_getUncleByBlockHashAndIndex':\n    case 'eth_getCompilers':\n    case 'eth_compileLLL':\n    case 'eth_compileSolidity':\n    case 'eth_compileSerpent':\n    case 'shh_version':\n      return 'perma'\n\n    // cache until fork\n    case 'eth_getBlockByNumber':\n    case 'eth_getBlockTransactionCountByNumber':\n    case 'eth_getUncleCountByBlockNumber':\n    case 'eth_getTransactionByBlockNumberAndIndex':\n    case 'eth_getUncleByBlockNumberAndIndex':\n      return 'fork'\n\n    // cache for block\n    case 'eth_gasPrice':\n    case 'eth_getBalance':\n    case 'eth_getStorageAt':\n    case 'eth_getTransactionCount':\n    case 'eth_call':\n    case 'eth_estimateGas':\n    case 'eth_getFilterLogs':\n    case 'eth_getLogs':\n    case 'eth_blockNumber':\n      return 'block'\n\n    // never cache\n    case 'net_version':\n    case 'net_peerCount':\n    case 'net_listening':\n    case 'eth_syncing':\n    case 'eth_sign':\n    case 'eth_coinbase':\n    case 'eth_mining':\n    case 'eth_hashrate':\n    case 'eth_accounts':\n    case 'eth_sendTransaction':\n    case 'eth_sendRawTransaction':\n    case 'eth_newFilter':\n    case 'eth_newBlockFilter':\n    case 'eth_newPendingTransactionFilter':\n    case 'eth_uninstallFilter':\n    case 'eth_getFilterChanges':\n    case 'eth_getWork':\n    case 'eth_submitWork':\n    case 'eth_submitHashrate':\n    case 'db_putString':\n    case 'db_getString':\n    case 'db_putHex':\n    case 'db_getHex':\n    case 'shh_post':\n    case 'shh_newIdentity':\n    case 'shh_hasIdentity':\n    case 'shh_newGroup':\n    case 'shh_addToGroup':\n    case 'shh_newFilter':\n    case 'shh_uninstallFilter':\n    case 'shh_getFilterChanges':\n    case 'shh_getMessages':\n      return 'never'\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _doParallel = require('./internal/doParallel');\n\nvar _doParallel2 = _interopRequireDefault(_doParallel);\n\nvar _map = require('./internal/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Produces a new collection of values by mapping each value in `coll` through\n * the `iteratee` function. The `iteratee` is called with an item from `coll`\n * and a callback for when it has finished processing. Each of these callback\n * takes 2 arguments: an `error`, and the transformed item from `coll`. If\n * `iteratee` passes an error to its callback, the main `callback` (for the\n * `map` function) is immediately called with the error.\n *\n * Note, that since this function applies the `iteratee` to each item in\n * parallel, there is no guarantee that the `iteratee` functions will complete\n * in order. However, the results array will be in the same order as the\n * original `coll`.\n *\n * If `map` is passed an Object, the results will be an Array.  The results\n * will roughly be in the order of the original Objects' keys (but this can\n * vary across JavaScript engines).\n *\n * @name map\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with the transformed item.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Results is an Array of the\n * transformed items from the `coll`. Invoked with (err, results).\n * @example\n *\n * async.map(['file1','file2','file3'], fs.stat, function(err, results) {\n *     // results is now an array of stats for each file\n * });\n */\nexports.default = (0, _doParallel2.default)(_map2.default);\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = doParallel;\n\nvar _eachOf = require('../eachOf');\n\nvar _eachOf2 = _interopRequireDefault(_eachOf);\n\nvar _wrapAsync = require('./wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction doParallel(fn) {\n    return function (obj, iteratee, callback) {\n        return fn(_eachOf2.default, obj, (0, _wrapAsync2.default)(iteratee), callback);\n    };\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = eachOfLimit;\n\nvar _eachOfLimit2 = require('./internal/eachOfLimit');\n\nvar _eachOfLimit3 = _interopRequireDefault(_eachOfLimit2);\n\nvar _wrapAsync = require('./internal/wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The same as [`eachOf`]{@link module:Collections.eachOf} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name eachOfLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.eachOf]{@link module:Collections.eachOf}\n * @alias forEachOfLimit\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each\n * item in `coll`. The `key` is the item's key, or index in the case of an\n * array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n */\nfunction eachOfLimit(coll, limit, iteratee, callback) {\n  (0, _eachOfLimit3.default)(limit)(coll, (0, _wrapAsync2.default)(iteratee), callback);\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = iterator;\n\nvar _isArrayLike = require('lodash/isArrayLike');\n\nvar _isArrayLike2 = _interopRequireDefault(_isArrayLike);\n\nvar _getIterator = require('./getIterator');\n\nvar _getIterator2 = _interopRequireDefault(_getIterator);\n\nvar _keys = require('lodash/keys');\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction createArrayIterator(coll) {\n    var i = -1;\n    var len = coll.length;\n    return function next() {\n        return ++i < len ? { value: coll[i], key: i } : null;\n    };\n}\n\nfunction createES2015Iterator(iterator) {\n    var i = -1;\n    return function next() {\n        var item = iterator.next();\n        if (item.done) return null;\n        i++;\n        return { value: item.value, key: i };\n    };\n}\n\nfunction createObjectIterator(obj) {\n    var okeys = (0, _keys2.default)(obj);\n    var i = -1;\n    var len = okeys.length;\n    return function next() {\n        var key = okeys[++i];\n        return i < len ? { value: obj[key], key: key } : null;\n    };\n}\n\nfunction iterator(coll) {\n    if ((0, _isArrayLike2.default)(coll)) {\n        return createArrayIterator(coll);\n    }\n\n    var iterator = (0, _getIterator2.default)(coll);\n    return iterator ? createES2015Iterator(iterator) : createObjectIterator(coll);\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (coll) {\n    return iteratorSymbol && coll[iteratorSymbol] && coll[iteratorSymbol]();\n};\n\nvar iteratorSymbol = typeof Symbol === 'function' && Symbol.iterator;\n\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = asyncify;\n\nvar _isObject = require('lodash/isObject');\n\nvar _isObject2 = _interopRequireDefault(_isObject);\n\nvar _initialParams = require('./internal/initialParams');\n\nvar _initialParams2 = _interopRequireDefault(_initialParams);\n\nvar _setImmediate = require('./internal/setImmediate');\n\nvar _setImmediate2 = _interopRequireDefault(_setImmediate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Take a sync function and make it async, passing its return value to a\n * callback. This is useful for plugging sync functions into a waterfall,\n * series, or other async functions. Any arguments passed to the generated\n * function will be passed to the wrapped function (except for the final\n * callback argument). Errors thrown will be passed to the callback.\n *\n * If the function passed to `asyncify` returns a Promise, that promises's\n * resolved/rejected state will be used to call the callback, rather than simply\n * the synchronous return value.\n *\n * This also means you can asyncify ES2017 `async` functions.\n *\n * @name asyncify\n * @static\n * @memberOf module:Utils\n * @method\n * @alias wrapSync\n * @category Util\n * @param {Function} func - The synchronous function, or Promise-returning\n * function to convert to an {@link AsyncFunction}.\n * @returns {AsyncFunction} An asynchronous wrapper of the `func`. To be\n * invoked with `(args..., callback)`.\n * @example\n *\n * // passing a regular synchronous function\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(JSON.parse),\n *     function (data, next) {\n *         // data is the result of parsing the text.\n *         // If there was a parsing error, it would have been caught.\n *     }\n * ], callback);\n *\n * // passing a function returning a promise\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(function (contents) {\n *         return db.model.create(contents);\n *     }),\n *     function (model, next) {\n *         // `model` is the instantiated model object.\n *         // If there was an error, this function would be skipped.\n *     }\n * ], callback);\n *\n * // es2017 example, though `asyncify` is not needed if your JS environment\n * // supports async functions out of the box\n * var q = async.queue(async.asyncify(async function(file) {\n *     var intermediateStep = await processFile(file);\n *     return await somePromise(intermediateStep)\n * }));\n *\n * q.push(files);\n */\nfunction asyncify(func) {\n    return (0, _initialParams2.default)(function (args, callback) {\n        var result;\n        try {\n            result = func.apply(this, args);\n        } catch (e) {\n            return callback(e);\n        }\n        // if result is Promise object\n        if ((0, _isObject2.default)(result) && typeof result.then === 'function') {\n            result.then(function (value) {\n                invokeCallback(callback, null, value);\n            }, function (err) {\n                invokeCallback(callback, err.message ? err : new Error(err));\n            });\n        } else {\n            callback(null, result);\n        }\n    });\n}\n\nfunction invokeCallback(callback, error, value) {\n    try {\n        callback(error, value);\n    } catch (e) {\n        (0, _setImmediate2.default)(rethrow, e);\n    }\n}\n\nfunction rethrow(error) {\n    throw error;\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (fn) {\n    return function () /*...args, callback*/{\n        var args = (0, _slice2.default)(arguments);\n        var callback = args.pop();\n        fn.call(this, args, callback);\n    };\n};\n\nvar _slice = require('./slice');\n\nvar _slice2 = _interopRequireDefault(_slice);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.hasNextTick = exports.hasSetImmediate = undefined;\nexports.fallback = fallback;\nexports.wrap = wrap;\n\nvar _slice = require('./slice');\n\nvar _slice2 = _interopRequireDefault(_slice);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar hasSetImmediate = exports.hasSetImmediate = typeof setImmediate === 'function' && setImmediate;\nvar hasNextTick = exports.hasNextTick = typeof process === 'object' && typeof process.nextTick === 'function';\n\nfunction fallback(fn) {\n    setTimeout(fn, 0);\n}\n\nfunction wrap(defer) {\n    return function (fn /*, ...args*/) {\n        var args = (0, _slice2.default)(arguments, 1);\n        defer(function () {\n            fn.apply(null, args);\n        });\n    };\n}\n\nvar _defer;\n\nif (hasSetImmediate) {\n    _defer = setImmediate;\n} else if (hasNextTick) {\n    _defer = process.nextTick;\n} else {\n    _defer = fallback;\n}\n\nexports.default = wrap(_defer);","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _asyncMap;\n\nvar _noop = require('lodash/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _wrapAsync = require('./wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncMap(eachfn, arr, iteratee, callback) {\n    callback = callback || _noop2.default;\n    arr = arr || [];\n    var results = [];\n    var counter = 0;\n    var _iteratee = (0, _wrapAsync2.default)(iteratee);\n\n    eachfn(arr, function (value, _, callback) {\n        var index = counter++;\n        _iteratee(value, function (err, v) {\n            results[index] = v;\n            callback(err);\n        });\n    }, function (err) {\n        callback(err, results);\n    });\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _eachLimit = require('./eachLimit');\n\nvar _eachLimit2 = _interopRequireDefault(_eachLimit);\n\nvar _doLimit = require('./internal/doLimit');\n\nvar _doLimit2 = _interopRequireDefault(_doLimit);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The same as [`each`]{@link module:Collections.each} but runs only a single async operation at a time.\n *\n * @name eachSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.each]{@link module:Collections.each}\n * @alias forEachSeries\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each\n * item in `coll`.\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOfSeries`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n */\nexports.default = (0, _doLimit2.default)(_eachLimit2.default, 1);\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = eachLimit;\n\nvar _eachOfLimit = require('./internal/eachOfLimit');\n\nvar _eachOfLimit2 = _interopRequireDefault(_eachOfLimit);\n\nvar _withoutIndex = require('./internal/withoutIndex');\n\nvar _withoutIndex2 = _interopRequireDefault(_withoutIndex);\n\nvar _wrapAsync = require('./internal/wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The same as [`each`]{@link module:Collections.each} but runs a maximum of `limit` async operations at a time.\n *\n * @name eachLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.each]{@link module:Collections.each}\n * @alias forEachLimit\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOfLimit`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n */\nfunction eachLimit(coll, limit, iteratee, callback) {\n  (0, _eachOfLimit2.default)(limit)(coll, (0, _withoutIndex2.default)((0, _wrapAsync2.default)(iteratee)), callback);\n}\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _withoutIndex;\nfunction _withoutIndex(iteratee) {\n    return function (value, index, callback) {\n        return iteratee(value, callback);\n    };\n}\nmodule.exports = exports[\"default\"];","const EventEmitter = require('events').EventEmitter\nconst inherits = require('util').inherits\n\nmodule.exports = Stoplight\n\n\ninherits(Stoplight, EventEmitter)\n\nfunction Stoplight(){\n  const self = this\n  EventEmitter.call(self)\n  self.isLocked = true\n}\n\nStoplight.prototype.go = function(){\n  const self = this\n  self.isLocked = false\n  self.emit('unlock')\n}\n\nStoplight.prototype.stop = function(){\n  const self = this\n  self.isLocked = true\n  self.emit('lock')\n}\n\nStoplight.prototype.await = function(fn){\n  const self = this\n  if (self.isLocked) {\n    self.once('unlock', fn)\n  } else {\n    setTimeout(fn)\n  }\n}","module.exports = createRandomId\n\n\nfunction createRandomId () {\n  // random id\n  return Math.floor(Number.MAX_SAFE_INTEGER * Math.random())\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (tasks, callback) {\n    callback = (0, _once2.default)(callback || _noop2.default);\n    if (!(0, _isArray2.default)(tasks)) return callback(new Error('First argument to waterfall must be an array of functions'));\n    if (!tasks.length) return callback();\n    var taskIndex = 0;\n\n    function nextTask(args) {\n        var task = (0, _wrapAsync2.default)(tasks[taskIndex++]);\n        args.push((0, _onlyOnce2.default)(next));\n        task.apply(null, args);\n    }\n\n    function next(err /*, ...args*/) {\n        if (err || taskIndex === tasks.length) {\n            return callback.apply(null, arguments);\n        }\n        nextTask((0, _slice2.default)(arguments, 1));\n    }\n\n    nextTask([]);\n};\n\nvar _isArray = require('lodash/isArray');\n\nvar _isArray2 = _interopRequireDefault(_isArray);\n\nvar _noop = require('lodash/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _once = require('./internal/once');\n\nvar _once2 = _interopRequireDefault(_once);\n\nvar _slice = require('./internal/slice');\n\nvar _slice2 = _interopRequireDefault(_slice);\n\nvar _onlyOnce = require('./internal/onlyOnce');\n\nvar _onlyOnce2 = _interopRequireDefault(_onlyOnce);\n\nvar _wrapAsync = require('./internal/wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = exports['default'];\n\n/**\n * Runs the `tasks` array of functions in series, each passing their results to\n * the next in the array. However, if any of the `tasks` pass an error to their\n * own callback, the next function is not executed, and the main `callback` is\n * immediately called with the error.\n *\n * @name waterfall\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array} tasks - An array of [async functions]{@link AsyncFunction}\n * to run.\n * Each function should complete with any number of `result` values.\n * The `result` values will be passed as arguments, in order, to the next task.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed. This will be passed the results of the last task's\n * callback. Invoked with (err, [results]).\n * @returns undefined\n * @example\n *\n * async.waterfall([\n *     function(callback) {\n *         callback(null, 'one', 'two');\n *     },\n *     function(arg1, arg2, callback) {\n *         // arg1 now equals 'one' and arg2 now equals 'two'\n *         callback(null, 'three');\n *     },\n *     function(arg1, callback) {\n *         // arg1 now equals 'three'\n *         callback(null, 'done');\n *     }\n * ], function (err, result) {\n *     // result now equals 'done'\n * });\n *\n * // Or, with named functions:\n * async.waterfall([\n *     myFirstFunction,\n *     mySecondFunction,\n *     myLastFunction,\n * ], function (err, result) {\n *     // result now equals 'done'\n * });\n * function myFirstFunction(callback) {\n *     callback(null, 'one', 'two');\n * }\n * function mySecondFunction(arg1, arg2, callback) {\n *     // arg1 now equals 'one' and arg2 now equals 'two'\n *     callback(null, 'three');\n * }\n * function myLastFunction(arg1, callback) {\n *     // arg1 now equals 'three'\n *     callback(null, 'done');\n * }\n */","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = parallelLimit;\n\nvar _eachOf = require('./eachOf');\n\nvar _eachOf2 = _interopRequireDefault(_eachOf);\n\nvar _parallel = require('./internal/parallel');\n\nvar _parallel2 = _interopRequireDefault(_parallel);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Run the `tasks` collection of functions in parallel, without waiting until\n * the previous function has completed. If any of the functions pass an error to\n * its callback, the main `callback` is immediately called with the value of the\n * error. Once the `tasks` have completed, the results are passed to the final\n * `callback` as an array.\n *\n * **Note:** `parallel` is about kicking-off I/O tasks in parallel, not about\n * parallel execution of code.  If your tasks do not use any timers or perform\n * any I/O, they will actually be executed in series.  Any synchronous setup\n * sections for each task will happen one after the other.  JavaScript remains\n * single-threaded.\n *\n * **Hint:** Use [`reflect`]{@link module:Utils.reflect} to continue the\n * execution of other tasks when a task fails.\n *\n * It is also possible to use an object instead of an array. Each property will\n * be run as a function and the results will be passed to the final `callback`\n * as an object instead of an array. This can be a more readable way of handling\n * results from {@link async.parallel}.\n *\n * @name parallel\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|Object} tasks - A collection of\n * [async functions]{@link AsyncFunction} to run.\n * Each async function can complete with any number of optional `result` values.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed successfully. This function gets a results array\n * (or object) containing all the result arguments passed to the task callbacks.\n * Invoked with (err, results).\n *\n * @example\n * async.parallel([\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ],\n * // optional callback\n * function(err, results) {\n *     // the results array will equal ['one','two'] even though\n *     // the second function had a shorter timeout.\n * });\n *\n * // an example using an object instead of an array\n * async.parallel({\n *     one: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 1);\n *         }, 200);\n *     },\n *     two: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 2);\n *         }, 100);\n *     }\n * }, function(err, results) {\n *     // results is now equals to: {one: 1, two: 2}\n * });\n */\nfunction parallelLimit(tasks, callback) {\n  (0, _parallel2.default)(_eachOf2.default, tasks, callback);\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _parallel;\n\nvar _noop = require('lodash/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _isArrayLike = require('lodash/isArrayLike');\n\nvar _isArrayLike2 = _interopRequireDefault(_isArrayLike);\n\nvar _slice = require('./slice');\n\nvar _slice2 = _interopRequireDefault(_slice);\n\nvar _wrapAsync = require('./wrapAsync');\n\nvar _wrapAsync2 = _interopRequireDefault(_wrapAsync);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _parallel(eachfn, tasks, callback) {\n    callback = callback || _noop2.default;\n    var results = (0, _isArrayLike2.default)(tasks) ? [] : {};\n\n    eachfn(tasks, function (task, key, callback) {\n        (0, _wrapAsync2.default)(task)(function (err, result) {\n            if (arguments.length > 2) {\n                result = (0, _slice2.default)(arguments, 1);\n            }\n            results[key] = result;\n            callback(err);\n        });\n    }, function (err) {\n        callback(err, results);\n    });\n}\nmodule.exports = exports['default'];","const createPayload = require('./create-payload.js')\n\nmodule.exports = estimateGas\n\n/*\n\nThis is a work around for https://github.com/ethereum/go-ethereum/issues/2577\n\n*/\n\n\nfunction estimateGas(provider, txParams, cb) {\n  provider.sendAsync(createPayload({\n    method: 'eth_estimateGas',\n    params: [txParams]\n  }), function(err, res){\n    if (err) {\n      // handle simple value transfer case\n      if (err.message === 'no contract code at given address') {\n        return cb(null, '0xcf08')\n      } else {\n        return cb(err)        \n      }\n    }\n    cb(null, res.result)\n  })\n}"],"sourceRoot":""}