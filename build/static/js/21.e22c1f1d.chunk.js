(this["webpackJsonpjibrel-defi-dapp"]=this["webpackJsonpjibrel-defi-dapp"]||[]).push([[21],{1107:function(e,n,t){"use strict";t.r(n),t.d(n,"AccountNameRequiredError",(function(){return s})),t.d(n,"AccountNotSupported",(function(){return d})),t.d(n,"AmountRequired",(function(){return f})),t.d(n,"BluetoothRequired",(function(){return l})),t.d(n,"BtcUnmatchedApp",(function(){return p})),t.d(n,"CantOpenDevice",(function(){return g})),t.d(n,"CantScanQRCode",(function(){return Be})),t.d(n,"CashAddrNotSupported",(function(){return h})),t.d(n,"CurrencyNotSupported",(function(){return E})),t.d(n,"DBNotReset",(function(){return Ye})),t.d(n,"DBWrongPassword",(function(){return Ve})),t.d(n,"DeviceAppVerifyNotSupported",(function(){return v})),t.d(n,"DeviceGenuineSocketEarlyClose",(function(){return A})),t.d(n,"DeviceHalted",(function(){return T})),t.d(n,"DeviceInOSUExpected",(function(){return D})),t.d(n,"DeviceNameInvalid",(function(){return C})),t.d(n,"DeviceNotGenuineError",(function(){return S})),t.d(n,"DeviceOnDashboardExpected",(function(){return I})),t.d(n,"DeviceOnDashboardUnexpected",(function(){return N})),t.d(n,"DeviceShouldStayInApp",(function(){return be})),t.d(n,"DeviceSocketFail",(function(){return O})),t.d(n,"DeviceSocketNoBulkStatus",(function(){return R})),t.d(n,"DisconnectedDevice",(function(){return U})),t.d(n,"DisconnectedDeviceDuringOperation",(function(){return m})),t.d(n,"ETHAddressNonEIP",(function(){return _e})),t.d(n,"EnpointConfigError",(function(){return y})),t.d(n,"EthAppPleaseEnableContractData",(function(){return b})),t.d(n,"FeeEstimationFailed",(function(){return w})),t.d(n,"FeeNotLoaded",(function(){return Me})),t.d(n,"FeeRequired",(function(){return Le})),t.d(n,"FeeTooHigh",(function(){return xe})),t.d(n,"FirmwareNotRecognized",(function(){return k})),t.d(n,"FirmwareOrAppUpdateRequired",(function(){return ze})),t.d(n,"GasLessThanEstimate",(function(){return ae})),t.d(n,"GenuineCheckFailed",(function(){return qe})),t.d(n,"HardResetFail",(function(){return F})),t.d(n,"InvalidAddress",(function(){return _})),t.d(n,"InvalidAddressBecauseDestinationIsAlsoSource",(function(){return B})),t.d(n,"InvalidXRPTag",(function(){return P})),t.d(n,"LatestMCUInstalledError",(function(){return M})),t.d(n,"LedgerAPI4xx",(function(){return He})),t.d(n,"LedgerAPI5xx",(function(){return We})),t.d(n,"LedgerAPIError",(function(){return x})),t.d(n,"LedgerAPIErrorWithMessage",(function(){return G})),t.d(n,"LedgerAPINotAvailable",(function(){return j})),t.d(n,"MCUNotGenuineToDashboard",(function(){return pe})),t.d(n,"ManagerAppAlreadyInstalledError",(function(){return q})),t.d(n,"ManagerAppDepInstallRequired",(function(){return W})),t.d(n,"ManagerAppDepUninstallRequired",(function(){return z})),t.d(n,"ManagerAppRelyOnBTCError",(function(){return H})),t.d(n,"ManagerDeviceLockedError",(function(){return K})),t.d(n,"ManagerFirmwareNotEnoughSpaceError",(function(){return V})),t.d(n,"ManagerNotEnoughSpaceError",(function(){return Y})),t.d(n,"ManagerUninstallBTCDep",(function(){return Q})),t.d(n,"NetworkDown",(function(){return X})),t.d(n,"NoAccessToCamera",(function(){return re})),t.d(n,"NoAddressesFound",(function(){return J})),t.d(n,"NoDBPathGiven",(function(){return Ke})),t.d(n,"NotEnoughBalance",(function(){return Z})),t.d(n,"NotEnoughBalanceBecauseDestinationNotCreated",(function(){return te})),t.d(n,"NotEnoughBalanceInParentAccount",(function(){return ee})),t.d(n,"NotEnoughBalanceToDelegate",(function(){return $})),t.d(n,"NotEnoughGas",(function(){return oe})),t.d(n,"NotEnoughSpendableBalance",(function(){return ne})),t.d(n,"NotSupportedLegacyAddress",(function(){return ie})),t.d(n,"PairingFailed",(function(){return je})),t.d(n,"PasswordIncorrectError",(function(){return ce})),t.d(n,"PasswordsDontMatchError",(function(){return ue})),t.d(n,"RecipientRequired",(function(){return ge})),t.d(n,"RecommendSubAccountsToEmpty",(function(){return se})),t.d(n,"RecommendUndelegation",(function(){return de})),t.d(n,"StatusCodes",(function(){return Xe})),t.d(n,"SyncError",(function(){return Ge})),t.d(n,"TimeoutTagged",(function(){return fe})),t.d(n,"TransportError",(function(){return Qe})),t.d(n,"TransportInterfaceNotAvailable",(function(){return Ue})),t.d(n,"TransportOpenUserCancelled",(function(){return Re})),t.d(n,"TransportRaceCondition",(function(){return me})),t.d(n,"TransportStatusError",(function(){return Ze})),t.d(n,"TransportWebUSBGestureRequired",(function(){return ye})),t.d(n,"UnavailableTezosOriginatedAccountReceive",(function(){return he})),t.d(n,"UnavailableTezosOriginatedAccountSend",(function(){return Ee})),t.d(n,"UnexpectedBootloader",(function(){return le})),t.d(n,"UnknownMCU",(function(){return L})),t.d(n,"UpdateFetchFileFail",(function(){return ve})),t.d(n,"UpdateIncorrectHash",(function(){return Ae})),t.d(n,"UpdateIncorrectSig",(function(){return Se})),t.d(n,"UpdateYourApp",(function(){return Ie})),t.d(n,"UserRefusedAddress",(function(){return De})),t.d(n,"UserRefusedAllowManager",(function(){return Ce})),t.d(n,"UserRefusedDeviceNameChange",(function(){return Ne})),t.d(n,"UserRefusedFirmwareUpdate",(function(){return Te})),t.d(n,"UserRefusedOnDevice",(function(){return Oe})),t.d(n,"WebsocketConnectionError",(function(){return we})),t.d(n,"WebsocketConnectionFailed",(function(){return ke})),t.d(n,"WrongAppForCurrency",(function(){return Pe})),t.d(n,"WrongDeviceForAccount",(function(){return Fe})),t.d(n,"addCustomErrorDeserializer",(function(){return i})),t.d(n,"createCustomErrorClass",(function(){return a})),t.d(n,"deserializeError",(function(){return u})),t.d(n,"getAltStatusMessage",(function(){return Je})),t.d(n,"serializeError",(function(){return c}));var r={},o={},i=function(e,n){o[e]=n},a=function(e){var n=function(n,t){Object.assign(this,t),this.name=e,this.message=n||e,this.stack=(new Error).stack};return n.prototype=new Error,r[e]=n,n},u=function e(n){if("object"===typeof n&&n){try{var t=JSON.parse(n.message);t.message&&t.name&&(n=t)}catch(f){}var i=void 0;if("string"===typeof n.name){var u=n.name,c=o[u];if(c)i=c(n);else{var s="Error"===u?Error:r[u];s||(console.warn("deserializing an unknown class '"+u+"'"),s=a(u)),i=Object.create(s.prototype);try{for(var d in n)n.hasOwnProperty(d)&&(i[d]=n[d])}catch(f){}}}else i=new Error(n.message);return!i.stack&&Error.captureStackTrace&&Error.captureStackTrace(i,e),i}return new Error(String(n))},c=function(e){return e?"object"===typeof e?function e(n,t){var r={};t.push(n);for(var o=0,i=Object.keys(n);o<i.length;o++){var a=i[o],u=n[a];"function"!==typeof u&&(u&&"object"===typeof u?-1!==t.indexOf(n[a])?r[a]="[Circular]":r[a]=e(n[a],t.slice(0)):r[a]=u)}"string"===typeof n.name&&(r.name=n.name);"string"===typeof n.message&&(r.message=n.message);"string"===typeof n.stack&&(r.stack=n.stack);return r}(e,[]):"function"===typeof e?"[Function: "+(e.name||"anonymous")+"]":e:e};var s=a("AccountNameRequired"),d=a("AccountNotSupported"),f=a("AmountRequired"),l=a("BluetoothRequired"),p=a("BtcUnmatchedApp"),g=a("CantOpenDevice"),h=a("CashAddrNotSupported"),E=a("CurrencyNotSupported"),v=a("DeviceAppVerifyNotSupported"),A=a("DeviceGenuineSocketEarlyClose"),S=a("DeviceNotGenuine"),I=a("DeviceOnDashboardExpected"),N=a("DeviceOnDashboardUnexpected"),D=a("DeviceInOSUExpected"),T=a("DeviceHalted"),C=a("DeviceNameInvalid"),O=a("DeviceSocketFail"),R=a("DeviceSocketNoBulkStatus"),U=a("DisconnectedDevice"),m=a("DisconnectedDeviceDuringOperation"),y=a("EnpointConfig"),b=a("EthAppPleaseEnableContractData"),w=a("FeeEstimationFailed"),k=a("FirmwareNotRecognized"),F=a("HardResetFail"),P=a("InvalidXRPTag"),_=a("InvalidAddress"),B=a("InvalidAddressBecauseDestinationIsAlsoSource"),M=a("LatestMCUInstalledError"),L=a("UnknownMCU"),x=a("LedgerAPIError"),G=a("LedgerAPIErrorWithMessage"),j=a("LedgerAPINotAvailable"),q=a("ManagerAppAlreadyInstalled"),H=a("ManagerAppRelyOnBTC"),W=a("ManagerAppDepInstallRequired"),z=a("ManagerAppDepUninstallRequired"),K=a("ManagerDeviceLocked"),V=a("ManagerFirmwareNotEnoughSpace"),Y=a("ManagerNotEnoughSpace"),Q=a("ManagerUninstallBTCDep"),X=a("NetworkDown"),J=a("NoAddressesFound"),Z=a("NotEnoughBalance"),$=a("NotEnoughBalanceToDelegate"),ee=a("NotEnoughBalanceInParentAccount"),ne=a("NotEnoughSpendableBalance"),te=a("NotEnoughBalanceBecauseDestinationNotCreated"),re=a("NoAccessToCamera"),oe=a("NotEnoughGas"),ie=a("NotSupportedLegacyAddress"),ae=a("GasLessThanEstimate"),ue=a("PasswordsDontMatch"),ce=a("PasswordIncorrect"),se=a("RecommendSubAccountsToEmpty"),de=a("RecommendUndelegation"),fe=a("TimeoutTagged"),le=a("UnexpectedBootloader"),pe=a("MCUNotGenuineToDashboard"),ge=a("RecipientRequired"),he=a("UnavailableTezosOriginatedAccountReceive"),Ee=a("UnavailableTezosOriginatedAccountSend"),ve=a("UpdateFetchFileFail"),Ae=a("UpdateIncorrectHash"),Se=a("UpdateIncorrectSig"),Ie=a("UpdateYourApp"),Ne=a("UserRefusedDeviceNameChange"),De=a("UserRefusedAddress"),Te=a("UserRefusedFirmwareUpdate"),Ce=a("UserRefusedAllowManager"),Oe=a("UserRefusedOnDevice"),Re=a("TransportOpenUserCancelled"),Ue=a("TransportInterfaceNotAvailable"),me=a("TransportRaceCondition"),ye=a("TransportWebUSBGestureRequired"),be=a("DeviceShouldStayInApp"),we=a("WebsocketConnectionError"),ke=a("WebsocketConnectionFailed"),Fe=a("WrongDeviceForAccount"),Pe=a("WrongAppForCurrency"),_e=a("ETHAddressNonEIP"),Be=a("CantScanQRCode"),Me=a("FeeNotLoaded"),Le=a("FeeRequired"),xe=a("FeeTooHigh"),Ge=a("SyncError"),je=a("PairingFailed"),qe=a("GenuineCheckFailed"),He=a("LedgerAPI4xx"),We=a("LedgerAPI5xx"),ze=a("FirmwareOrAppUpdateRequired"),Ke=a("NoDBPathGiven"),Ve=a("DBWrongPassword"),Ye=a("DBNotReset");function Qe(e,n){this.name="TransportError",this.message=e,this.stack=(new Error).stack,this.id=n}Qe.prototype=new Error,i("TransportError",(function(e){return new Qe(e.message,e.id)}));var Xe={PIN_REMAINING_ATTEMPTS:25536,INCORRECT_LENGTH:26368,MISSING_CRITICAL_PARAMETER:26624,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,SECURITY_STATUS_NOT_SATISFIED:27010,CONDITIONS_OF_USE_NOT_SATISFIED:27013,INCORRECT_DATA:27264,NOT_ENOUGH_MEMORY_SPACE:27268,REFERENCED_DATA_NOT_FOUND:27272,FILE_ALREADY_EXISTS:27273,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,CLA_NOT_SUPPORTED:28160,TECHNICAL_PROBLEM:28416,OK:36864,MEMORY_PROBLEM:37440,NO_EF_SELECTED:37888,INVALID_OFFSET:37890,FILE_NOT_FOUND:37892,INCONSISTENT_FILE:37896,ALGORITHM_NOT_SUPPORTED:38020,INVALID_KCV:38021,CODE_NOT_INITIALIZED:38914,ACCESS_CONDITION_NOT_FULFILLED:38916,CONTRADICTION_SECRET_CODE_STATUS:38920,CONTRADICTION_INVALIDATION:38928,CODE_BLOCKED:38976,MAX_VALUE_REACHED:38992,GP_AUTH_FAILED:25344,LICENSING:28482,HALTED:28586};function Je(e){switch(e){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received"}if(28416<=e&&e<=28671)return"Internal error, please report"}function Ze(e){this.name="TransportStatusError";var n=Object.keys(Xe).find((function(n){return Xe[n]===e}))||"UNKNOWN_ERROR",t=Je(e)||n,r=e.toString(16);this.message="Ledger device: "+t+" (0x"+r+")",this.stack=(new Error).stack,this.statusCode=e,this.statusText=n}Ze.prototype=new Error,i("TransportStatusError",(function(e){return new Ze(e.statusCode)}))},1600:function(e,n,t){"use strict";t.r(n),function(e){t.d(n,"default",(function(){return d}));var r=t(2),o=t(4),i=t(1601),a=t(1107),u=(t(26),t(195));function c(n){return e.from(n.startsWith("0x")?n.slice(2):n,"hex")}function s(e){return e?c(e):null}var d=function(){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"w0w";Object(r.a)(this,n),this.transport=void 0,this.transport=e,e.decorateAppAPIMethods(this,["getAddress","provideERC20TokenInformation","signTransaction","signPersonalMessage","getAppConfiguration","starkGetPublicKey","starkSignOrder","starkSignTransfer","starkProvideQuantum"],t)}return Object(o.a)(n,[{key:"getAddress",value:function(n,t,r){var o=Object(i.b)(n),a=e.alloc(1+4*o.length);return a[0]=o.length,o.forEach((function(e,n){a.writeUInt32BE(e,1+4*n)})),this.transport.send(224,2,t?1:0,r?1:0,a).then((function(e){var n={},t=e[0],o=e[1+t];return n.publicKey=e.slice(1,1+t).toString("hex"),n.address="0x"+e.slice(1+t+1,1+t+1+o).toString("ascii"),r&&(n.chainCode=e.slice(1+t+1+o,1+t+1+o+32).toString("hex")),n}))}},{key:"provideERC20TokenInformation",value:function(e){var n=e.data;return this.transport.send(224,10,0,0,n).then((function(){return!0}),(function(e){if(e&&27904===e.statusCode)return!1;throw e}))}},{key:"signTransaction",value:function(n,t){var r,o=this,c=Object(i.b)(n),s=0,d=e.from(t,"hex"),f=[],l=Object(u.decode)(d),p=0;if(l.length>6){var g=Object(u.encode)(l.slice(-3));p=d.length-(g.length-1)}for(var h=function(){var n=0===s?149-4*c.length:150,t=s+n>d.length?d.length-s:n;0!=p&&s+t==p&&t--;var r=e.alloc(0===s?1+4*c.length+t:t);0===s?(r[0]=c.length,c.forEach((function(e,n){r.writeUInt32BE(e,1+4*n)})),d.copy(r,1+4*c.length,s,s+t)):d.copy(r,0,s,s+t),f.push(r),s+=t};s!==d.length;)h();return Object(i.a)(f,(function(e,n){return o.transport.send(224,4,0===n?0:128,0,e).then((function(e){r=e}))})).then((function(){return{v:r.slice(0,1).toString("hex"),r:r.slice(1,33).toString("hex"),s:r.slice(33,65).toString("hex")}}),(function(e){throw function(e){return e&&27264===e.statusCode?new a.EthAppPleaseEnableContractData("Please enable Contract data on the Ethereum app Settings"):e}(e)}))}},{key:"getAppConfiguration",value:function(){return this.transport.send(224,6,0,0).then((function(e){var n={};return n.arbitraryDataEnabled=1&e[0],n.erc20ProvisioningNecessary=2&e[0],n.starkEnabled=4&e[0],n.version=e[1]+"."+e[2]+"."+e[3],n}))}},{key:"signPersonalMessage",value:function(n,t){for(var r,o=this,a=Object(i.b)(n),u=0,c=e.from(t,"hex"),s=[],d=function(){var n=0===u?149-4*a.length-4:150,t=u+n>c.length?c.length-u:n,r=e.alloc(0===u?1+4*a.length+4+t:t);0===u?(r[0]=a.length,a.forEach((function(e,n){r.writeUInt32BE(e,1+4*n)})),r.writeUInt32BE(c.length,1+4*a.length),c.copy(r,1+4*a.length+4,u,u+t)):c.copy(r,0,u,u+t),s.push(r),u+=t};u!==c.length;)d();return Object(i.a)(s,(function(e,n){return o.transport.send(224,8,0===n?0:128,0,e).then((function(e){r=e}))})).then((function(){return{v:r[0],r:r.slice(1,33).toString("hex"),s:r.slice(33,65).toString("hex")}}))}},{key:"starkGetPublicKey",value:function(n,t){var r=Object(i.b)(n),o=e.alloc(1+4*r.length);return o[0]=r.length,r.forEach((function(e,n){o.writeUInt32BE(e,1+4*n)})),this.transport.send(240,2,t?1:0,0,o).then((function(e){return e.slice(0,e.length-2)}))}},{key:"starkSignOrder",value:function(n,t,r,o,a,u,c,d,f,l,p){var g=s(t),h=s(o),E=Object(i.b)(n),v=e.alloc(1+4*E.length+20+32+20+32+4+4+8+8+4+4,0),A=0;return v[0]=E.length,E.forEach((function(e,n){v.writeUInt32BE(e,1+4*n)})),A=1+4*E.length,g&&g.copy(v,A),A+=20,e.from(r.toString(16).padStart(64,"0"),"hex").copy(v,A),A+=32,h&&h.copy(v,A),A+=20,e.from(a.toString(16).padStart(64,"0"),"hex").copy(v,A),A+=32,v.writeUInt32BE(u,A),A+=4,v.writeUInt32BE(c,A),A+=4,e.from(d.toString(16).padStart(16,"0"),"hex").copy(v,A),A+=8,e.from(f.toString(16).padStart(16,"0"),"hex").copy(v,A),A+=8,v.writeUInt32BE(l,A),A+=4,v.writeUInt32BE(p,A),this.transport.send(240,4,1,0,v).then((function(e){return{r:e.slice(1,33).toString("hex"),s:e.slice(33,65).toString("hex")}}))}},{key:"starkSignTransfer",value:function(n,t,r,o,a,u,d,f,l){var p=s(t),g=c(o),h=Object(i.b)(n),E=e.alloc(1+4*h.length+20+32+32+4+4+8+4+4,0),v=0;return E[0]=h.length,h.forEach((function(e,n){E.writeUInt32BE(e,1+4*n)})),v=1+4*h.length,p&&p.copy(E,v),v+=20,e.from(r.toString(16).padStart(64,"0"),"hex").copy(E,v),v+=32,g.copy(E,v),v+=32,E.writeUInt32BE(a,v),v+=4,E.writeUInt32BE(u,v),v+=4,e.from(d.toString(16).padStart(16,"0"),"hex").copy(E,v),v+=8,E.writeUInt32BE(f,v),v+=4,E.writeUInt32BE(l,v),this.transport.send(240,4,2,0,E).then((function(e){return{r:e.slice(1,33).toString("hex"),s:e.slice(33,65).toString("hex")}}))}},{key:"starkProvideQuantum",value:function(n,t){var r=s(n),o=e.alloc(52,0);return r&&r.copy(o,0),e.from(t.toString(16).padStart(64,"0"),"hex").copy(o,20),this.transport.send(240,8,0,0,o).then((function(){return!0}),(function(e){if(e&&27904===e.statusCode)return!1;throw e}))}}]),n}()}.call(this,t(11).Buffer)},1601:function(e,n,t){"use strict";function r(e){var n=[];return e.split("/").forEach((function(e){var t=parseInt(e,10);isNaN(t)||(e.length>1&&"'"===e[e.length-1]&&(t+=2147483648),n.push(t))})),n}function o(e,n){return Promise.resolve().then((function(){return function e(t,r,o){return t>=r.length?o:n(r[t],t).then((function(n){return o.push(n),e(t+1,r,o)}))}(0,e,[])}))}t.d(n,"b",(function(){return r})),t.d(n,"a",(function(){return o}))}}]);
//# sourceMappingURL=21.e22c1f1d.chunk.js.map