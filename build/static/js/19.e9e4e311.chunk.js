(this["webpackJsonpjibrel-defi-dapp"]=this["webpackJsonpjibrel-defi-dapp"]||[]).push([[19],{1331:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return i}));var r=n(19),a={blue:{id:"blue",productName:"Ledger\xa0Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:491520,blockSize:4096},nanoS:{id:"nanoS",productName:"Ledger\xa0Nano\xa0S",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:327680,blockSize:4096},nanoX:{id:"nanoX",productName:"Ledger\xa0Nano\xa0X",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2097152,blockSize:4096,bluetoothSpec:[{serviceUuid:"d973f2e0-b19e-11e2-9e96-0800200c9a66",notifyUuid:"d973f2e1-b19e-11e2-9e96-0800200c9a66",writeUuid:"d973f2e2-b19e-11e2-9e96-0800200c9a66"},{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572"}]}},c=Object.values(a),u=11415,i=function(e){var t=c.find((function(t){return t.legacyUsbProductId===e}));if(t)return t;var n=e>>8;return c.find((function(e){return e.productIdMM===n}))},o=[],s={};for(var d in a){var f=a[d],l=f.bluetoothSpec;if(l)for(var p=0;p<l.length;p++){var v=l[p];o.push(v.serviceUuid),s[v.serviceUuid]=s[v.serviceUuid.replace(/-/g,"")]=Object(r.a)({deviceModel:f},v)}}},1589:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"default",(function(){return m}));var r=n(1),a=n.n(r),c=n(12),u=n(2),i=n(4),o=n(55),s=n(6),d=n(5),f=n(1329),l=n(1590),p=n.n(l),v=n(1331),b=n(1330),h=n(1099),g=n(1591),m=function(t){Object(d.a)(r,t);var n=Object(s.a)(r);function r(t,i){var s;return Object(u.a)(this,r),(s=n.call(this)).device=void 0,s.deviceModel=void 0,s.channel=Math.floor(65535*Math.random()),s.packetSize=64,s.interfaceNumber=void 0,s._disconnectEmitted=!1,s._emitDisconnect=function(e){s._disconnectEmitted||(s._disconnectEmitted=!0,s.emit("disconnect",e))},s.exchange=function(t){return s.exchangeAtomicImpl(Object(c.a)(a.a.mark((function n(){var r,c,u,i,d,f,l,v,h,g;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=Object(o.a)(s),c=r.channel,u=r.packetSize,Object(b.a)("apdu","=> "+t.toString("hex")),i=p()(c,u),d=i.makeBlocks(t),f=0;case 5:if(!(f<d.length)){n.next=11;break}return n.next=8,s.device.transferOut(3,d[f]);case 8:f++,n.next=5;break;case 11:if(l=i.getReducedResult(v)){n.next=19;break}return n.next=14,s.device.transferIn(3,u);case 14:h=n.sent,g=e.from(h.data.buffer),v=i.reduceResponse(v,g),n.next=11;break;case 19:return Object(b.a)("apdu","<= "+l.toString("hex")),n.abrupt("return",l);case 21:case"end":return n.stop()}}),n)})))).catch((function(e){if(e&&e.message&&e.message.includes("disconnected"))throw s._emitDisconnect(e),new h.DisconnectedDeviceDuringOperation(e.message);throw e}))},s.device=t,s.interfaceNumber=i,s.deviceModel=Object(v.a)(t.productId),s}return Object(i.a)(r,[{key:"close",value:function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exchangeBusyPromise;case 2:return e.next=4,this.device.releaseInterface(this.interfaceNumber);case 4:return e.next=6,this.device.reset();case 6:return e.next=8,this.device.close();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setScrambleKey",value:function(){}}],[{key:"request",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.d)();case 2:return t=e.sent,e.abrupt("return",r.open(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"openConnected",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.b)();case 2:if(0!==(t=e.sent).length){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",r.open(t[0]));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"open",value:function(){var e=Object(c.a)(a.a.mark((function e(t){var n,c,u,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.open();case 2:if(null!==t.configuration){e.next=5;break}return e.next=5,t.selectConfiguration(1);case 5:return e.next=7,t.reset();case 7:if(n=t.configurations[0].interfaces.find((function(e){return e.alternates.some((function(e){return 255===e.interfaceClass}))}))){e.next=10;break}throw new h.TransportInterfaceNotAvailable("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.");case 10:return c=n.interfaceNumber,e.prev=11,e.next=14,t.claimInterface(c);case 14:e.next=21;break;case 16:return e.prev=16,e.t0=e.catch(11),e.next=20,t.close();case 20:throw new h.TransportInterfaceNotAvailable(e.t0.message);case 21:return u=new r(t,c),i=function e(n){t===n.device&&(navigator.usb.removeEventListener("disconnect",e),u._emitDisconnect(new h.DisconnectedDevice))},navigator.usb.addEventListener("disconnect",i),e.abrupt("return",u);case 25:case"end":return e.stop()}}),e,null,[[11,16]])})));return function(t){return e.apply(this,arguments)}}()}]),r}(f.a);m.isSupported=g.c,m.list=g.b,m.listen=function(e){var t=!1;return Object(g.a)().then((function(n){if(!t){var r=Object(v.a)(n.productId);e.next({type:"add",descriptor:n,deviceModel:r}),e.complete()}}),(function(t){window.DOMException&&t instanceof window.DOMException&&18===t.code?e.error(new h.TransportWebUSBGestureRequired(t.message)):e.error(new h.TransportOpenUserCancelled(t.message))})),{unsubscribe:function(){t=!0}}}}.call(this,n(13).Buffer)},1590:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(1099);function a(t){var n=e.alloc(2);return n.writeUInt16BE(t,0),n}var c={data:e.alloc(0),dataLength:0,sequence:0},u=function(t,n){return{makeBlocks:function(r){var c=e.concat([a(r.length),r]),u=n-5,i=Math.ceil(c.length/u);c=e.concat([c,e.alloc(i*u-c.length+1).fill(0)]);for(var o=[],s=0;s<i;s++){var d=e.alloc(5);d.writeUInt16BE(t,0),d.writeUInt8(5,2),d.writeUInt16BE(s,3);var f=c.slice(s*u,(s+1)*u);o.push(e.concat([d,f]))}return o},reduceResponse:function(n,a){var u=n||c,i=u.data,o=u.dataLength,s=u.sequence;if(a.readUInt16BE(0)!==t)throw new r.TransportError("Invalid channel","InvalidChannel");if(5!==a.readUInt8(2))throw new r.TransportError("Invalid tag","InvalidTag");if(a.readUInt16BE(3)!==s)throw new r.TransportError("Invalid sequence","InvalidSequence");n||(o=a.readUInt16BE(5)),s++;var d=a.slice(n?5:7);return(i=e.concat([i,d])).length>o&&(i=i.slice(0,o)),{data:i,dataLength:o,sequence:s}},getReducedResult:function(e){if(e&&e.dataLength===e.data.length)return e.data}}};t.default=u}).call(this,n(13).Buffer)},1591:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return v}));var r=n(1),a=n.n(r),c=n(12),u=n(1331),i=[{vendorId:u.b}];function o(){return s.apply(this,arguments)}function s(){return(s=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.usb.requestDevice({filters:i});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.usb.getDevices();case 2:return t=e.sent,e.abrupt("return",t.filter((function(e){return e.vendorId===u.b})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return p.apply(this,arguments)}function p(){return(p=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:if(!((t=e.sent).length>0)){e.next=5;break}return e.abrupt("return",t[0]);case 5:return e.abrupt("return",o());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(){return Promise.resolve(!!navigator&&!!navigator.usb&&"function"===typeof navigator.usb.getDevices)}}}]);
//# sourceMappingURL=19.e9e4e311.chunk.js.map